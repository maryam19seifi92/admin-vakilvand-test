import{_ as $}from"./CIC-ZNfW.js";import{_ as x,c as m,o as d,a as u,f as C,r as c,q as M,h as f,w as B,i as q,j as v,n as Z,b as n,t as S}from"./H5jg8Rw7.js";import{a as D,u as g,b as I,_ as N}from"./D369H2F-.js";import{_ as j}from"./BnpvUAXn.js";import{u as A}from"./5eR0pXb4.js";const F={},z={fill:"currentColor",width:"16px",height:"16px",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"};function E(V,y){return d(),m("svg",z,y[0]||(y[0]=[u("path",{d:"M8 2L8 6L4 6L4 48L46 48L46 14L30 14L30 6L26 6L26 2 Z M 10 4L24 4L24 8L28 8L28 46L19 46L19 39L15 39L15 46L6 46L6 8L10 8 Z M 10 10L10 12L12 12L12 10 Z M 14 10L14 12L16 12L16 10 Z M 18 10L18 12L20 12L20 10 Z M 22 10L22 12L24 12L24 10 Z M 10 15L10 19L12 19L12 15 Z M 14 15L14 19L16 19L16 15 Z M 18 15L18 19L20 19L20 15 Z M 22 15L22 19L24 19L24 15 Z M 30 16L44 16L44 46L30 46 Z M 32 18L32 20L34 20L34 18 Z M 36 18L36 20L38 20L38 18 Z M 40 18L40 20L42 20L42 18 Z M 10 21L10 25L12 25L12 21 Z M 14 21L14 25L16 25L16 21 Z M 18 21L18 25L20 25L20 21 Z M 22 21L22 25L24 25L24 21 Z M 32 22L32 24L34 24L34 22 Z M 36 22L36 24L38 24L38 22 Z M 40 22L40 24L42 24L42 22 Z M 32 26L32 28L34 28L34 26 Z M 36 26L36 28L38 28L38 26 Z M 40 26L40 28L42 28L42 26 Z M 10 27L10 31L12 31L12 27 Z M 14 27L14 31L16 31L16 27 Z M 18 27L18 31L20 31L20 27 Z M 22 27L22 31L24 31L24 27 Z M 32 30L32 32L34 32L34 30 Z M 36 30L36 32L38 32L38 30 Z M 40 30L40 32L42 32L42 30 Z M 10 33L10 37L12 37L12 33 Z M 14 33L14 37L16 37L16 33 Z M 18 33L18 37L20 37L20 33 Z M 22 33L22 37L24 37L24 33 Z M 32 34L32 36L34 36L34 34 Z M 36 34L36 36L38 36L38 34 Z M 40 34L40 36L42 36L42 34 Z M 32 38L32 40L34 40L34 38 Z M 36 38L36 40L38 40L38 38 Z M 40 38L40 40L42 40L42 38 Z M 10 39L10 44L12 44L12 39 Z M 22 39L22 44L24 44L24 39 Z M 32 42L32 44L34 44L34 42 Z M 36 42L36 44L38 44L38 42 Z M 40 42L40 44L42 44L42 42Z"},null,-1)]))}const O=x(F,[["render",E]]),P={key:0,class:""},T={key:1,class:"flex items-center gap-x-2"},G={key:2,class:"grid grid-cols-4 gap-3"},H={key:3,class:"grid grid-cols-4 gap-3"},J={class:"grid grid-cols-4 gap-3"},K={key:4,class:"my-4"},Q={key:5,class:"grid grid-cols-3 items-end gap-3"},R={class:"mt-8 flex items-center justify-end"},W={type:"submit",class:"btn btn-primary ltr:ml-4 rtl:mr-4"},oe=C({__name:"AddClient",props:{open:{type:Boolean},edit:{type:Boolean},countries:{},tags:{},type:{}},emits:["close","getData"],setup(V,{emit:y}){const s=A(),p=V,_=y,o=c({}),e=c({person_type:"natural",phone:"",email:"",national_id:"",first_name:"",last_name:"",father_name:"",birth_date:new Date,country_id:null,province_id:null,city_id:null,address:"",company_name:"",company_national_id:"",company_registration_id:"",ceo_name:"",ceo_phone:"",reagent:"",how_acquainted:"",tag_id:"",role_id:p.type==="assistant"?4:p.type==="client"?5:p.type==="opposite"?6:p.type==="lawyer"?3:5}),w=async()=>{var t,l;try{s.toggleLoader(!0);const i=await g("/contact",{method:"POST",body:e.value});s.toggleLoader(!1),_("close"),_("getData"),I("مخاطب با موفقیت ثبت شد"),e.value.person_type="natural",e.value.phone="",e.value.email="",e.value.national_id="",e.value.first_name="",e.value.last_name="",e.value.father_name="",e.value.birth_date=new Date,e.value.country_id=null,e.value.province_id=null,e.value.city_id=null,e.value.address="",e.value.company_name="",e.value.company_national_id="",e.value.company_registration_id="",e.value.ceo_name="",e.value.ceo_phone="",e.value.reagent="",e.value.how_acquainted="",e.value.tag_id="",e.value.role_id=p.type==="assistant"?4:p.type==="client"?5:p.type==="opposite"?6:p.type==="lawyer"?3:5}catch(i){s.toggleLoader(!1),console.log("err",i.response),o.value=(l=(t=i==null?void 0:i.response)==null?void 0:t._data)==null?void 0:l.errors,console.log("errors",o.value)}},b=c([]),h=c([]);return M(()=>e.value.country_id,async t=>{try{s.toggleLoader(!0);const l=await g(`/provinces/${t}`);b.value=l==null?void 0:l.map(i=>({id:i.id,label:i.name})),s.toggleLoader(!1),e.value.province_id=null}catch{s.toggleLoader(!1)}}),M(()=>e.value.province_id,async t=>{try{s.toggleLoader(!0);const l=await g(`/cities/${t}`);h.value=l==null?void 0:l.map(i=>({id:i.id,label:i.name})),s.toggleLoader(!1),e.value.city_id=null}catch{s.toggleLoader(!1)}}),(t,l)=>{const i=$,U=O,r=D,L=j,k=N;return d(),f(k,{open:t.open,onClose:l[22]||(l[22]=a=>_("close")),title:t.edit?`ویرایش ${t.type==="client"?"موکل":t.type==="opposite"?"طرف":t.type==="lawyer"?"وکیل":t.type==="assistant"?"دستیار":"موکل"}`:`افزودن ${t.type==="client"?"موکل":t.type==="opposite"?"طرف":t.type==="lawyer"?"وکیل":t.type==="assistant"?"دستیار":"موکل"} `},{default:B(()=>[u("form",{onSubmit:q(w,["prevent"])},[t.type==="client"?(d(),m("p",P,"موکل شما شخص حقیقی است یا حقوقی؟")):v("",!0),t.type==="client"?(d(),m("div",T,[u("button",{type:"button",class:Z(["btn flex items-center gap-x-1 !border-none",e.value.person_type==="natural"?"btn-primary":"btn-outline-primary"]),onClick:l[0]||(l[0]=a=>e.value.person_type="natural")},[n(i),l[23]||(l[23]=u("span",null," حقیقی ",-1))],2),u("button",{type:"button",class:Z(["btn flex items-center gap-x-1 !border-none",e.value.person_type==="legal"?"btn-primary":"btn-outline-primary"]),onClick:l[1]||(l[1]=a=>e.value.person_type="legal")},[n(U),l[24]||(l[24]=u("span",null,"حقوقی",-1))],2)])):v("",!0),l[25]||(l[25]=u("hr",{class:"my-4"},null,-1)),e.value.person_type==="natural"?(d(),m("div",G,[n(r,{type:"text",placeholder:"",label:"نام *",modelValue:e.value.first_name,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.first_name=a),error:!!o.value.first_name,hint:o.value.first_name},null,8,["modelValue","error","hint"]),n(r,{type:"text",placeholder:"",label:"نام خانوادگی *",modelValue:e.value.last_name,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.last_name=a),error:!!o.value.last_name,hint:o.value.last_name},null,8,["modelValue","error","hint"]),n(r,{type:"text",placeholder:"",label:"نام پدر",modelValue:e.value.father_name,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.father_name=a),error:!!o.value.father_name,hint:o.value.father_name},null,8,["modelValue","error","hint"]),n(r,{type:"number",placeholder:"",label:"کد ملی",modelValue:e.value.national_id,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.national_id=a),error:!!o.value.national_id,hint:o.value.national_id},null,8,["modelValue","error","hint"]),n(r,{type:"tel",placeholder:"",label:"شماره تماس *",modelValue:e.value.phone,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.phone=a),error:!!o.value.phone,hint:o.value.phone},null,8,["modelValue","error","hint"]),n(r,{type:"email",placeholder:"",label:"ایمیل",modelValue:e.value.email,"onUpdate:modelValue":l[7]||(l[7]=a=>e.value.email=a),error:!!o.value.email,hint:o.value.email},null,8,["modelValue","error","hint"])])):(d(),m("div",H,[n(r,{type:"text",placeholder:"",label:"نام شرکت *",modelValue:e.value.company_name,"onUpdate:modelValue":l[8]||(l[8]=a=>e.value.company_name=a),error:!!o.value.company_name,hint:o.value.company_name},null,8,["modelValue","error","hint"]),n(r,{type:"text",placeholder:"",label:"نماینده *",modelValue:e.value.ceo_name,"onUpdate:modelValue":l[9]||(l[9]=a=>e.value.ceo_name=a),error:!!o.value.company_name,hint:o.value.company_name},null,8,["modelValue","error","hint"]),n(r,{type:"text",placeholder:"",label:"شناسه ملی *",modelValue:e.value.company_national_id,"onUpdate:modelValue":l[10]||(l[10]=a=>e.value.company_national_id=a),error:!!o.value.company_national_id,hint:o.value.company_national_id},null,8,["modelValue","error","hint"]),n(r,{type:"number",placeholder:"",label:"شماره ثبت",modelValue:e.value.company_registration_id,"onUpdate:modelValue":l[11]||(l[11]=a=>e.value.company_registration_id=a),error:!!o.value.company_registration_id,hint:o.value.company_registration_id},null,8,["modelValue","error","hint"]),n(r,{type:"tel",placeholder:"",label:"شماره تماس *",modelValue:e.value.ceo_phone,"onUpdate:modelValue":l[12]||(l[12]=a=>e.value.ceo_phone=a),error:!!o.value.ceo_phone,hint:o.value.ceo_phone},null,8,["modelValue","error","hint"]),n(r,{type:"email",placeholder:"",label:"ایمیل",modelValue:e.value.email,"onUpdate:modelValue":l[13]||(l[13]=a=>e.value.email=a),error:!!o.value.email,hint:o.value.email},null,8,["modelValue","error","hint"])])),l[26]||(l[26]=u("hr",{class:"my-4"},null,-1)),u("div",J,[n(L,{label:"کشور",placeholder:"کشور را انتخاب کنید",modelValue:e.value.country_id,"onUpdate:modelValue":l[14]||(l[14]=a=>e.value.country_id=a),options:t.countries,error:!!o.value.country_id,hint:o.value.country_id},null,8,["modelValue","options","error","hint"]),n(L,{label:"استان",placeholder:"استان را انتخاب کنید",modelValue:e.value.province_id,"onUpdate:modelValue":l[15]||(l[15]=a=>e.value.province_id=a),options:b.value,error:!!o.value.province_id,hint:o.value.province_id},null,8,["modelValue","options","error","hint"]),n(L,{label:"شهر",placeholder:"شهر را انتخاب کنید",modelValue:e.value.city_id,"onUpdate:modelValue":l[16]||(l[16]=a=>e.value.city_id=a),options:h.value,error:!!o.value.city_id,hint:o.value.city_id},null,8,["modelValue","options","error","hint"]),n(r,{class:"col-span-4",type:"text",placeholder:"",label:"آدرس",modelValue:e.value.address,"onUpdate:modelValue":l[17]||(l[17]=a=>e.value.address=a),error:!!o.value.address,hint:o.value.address},null,8,["modelValue","error","hint"])]),t.type==="client"?(d(),m("hr",K)):v("",!0),t.type==="client"?(d(),m("div",Q,[n(L,{label:"نحوه آشنایی",placeholder:"نحوه آشنایی را انتخاب کنید",modelValue:e.value.how_acquainted,"onUpdate:modelValue":l[18]||(l[18]=a=>e.value.how_acquainted=a),options:[{label:"تبلیغات",id:"outdoor_ads"},{label:"شبکه های اجتماعی",id:"social_media"},{label:"معرف",id:"referral"},{label:"گوگل",id:"google"}]},null,8,["modelValue"]),e.value.how_acquainted==="referral"?(d(),f(r,{key:0,type:"text",placeholder:"",label:"معرف",modelValue:e.value.reagent,"onUpdate:modelValue":l[19]||(l[19]=a=>e.value.reagent=a)},null,8,["modelValue"])):v("",!0),n(L,{label:"برچسب",placeholder:"برچسب را انتخاب کنید",modelValue:e.value.tag_id,"onUpdate:modelValue":l[20]||(l[20]=a=>e.value.tag_id=a),options:t.tags},null,8,["modelValue","options"])])):v("",!0),u("div",R,[u("button",{type:"button",class:"btn btn-outline-danger",onClick:l[21]||(l[21]=a=>_("close"))},"انصراف"),u("button",W,S(t.edit?"بروزرسانی":"افزودن"),1)])],32)]),_:1},8,["open","title"])}}});export{oe as _,O as a};
